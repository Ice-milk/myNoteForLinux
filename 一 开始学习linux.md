# linux学习方法
适应命令行操作

## 解决问题的智慧
把问题描述清楚

自己寻找答案

帮助、文档、示例、查找

## 忘掉windows思维方式
计划、专注、坚持、练习

## 学习linux的注意事项
- linux严格区分大小写，命令全是小写，**tab键可以自动补全文件名**
- linux中所有内容都是以文件形式保存的，包括硬件
    - 硬盘文件是/dev/sd[a-p]
    - 光盘文件是/dev/sr0等
    - 网卡/dev/sysconfig/network-scripts/ifconfig-网卡名
    - **所有功能想要永久生效，都要写入文件**
- linux不靠扩展名区分文件类型，而是通过权限
    - 压缩包：.gz、.bz2、.tar.bz2、.tgz,区分压缩包类型
    - 二进制文件：.rpm
    - 网页文件：.html、.php
    - 脚本文件：.sh
    - 配置文件：.conf
    - 扩展名是为了管理方便
- Windows下的程序不能直接在linux中安装和运行
- linux的所有存储设备都必须挂载之后才能使用，包括U盘、移动硬盘、光盘，需要手动挂载
## 服务器管理和维护建议
1. linux各目录的作用
- bin是存放命令的目录
- sbin内存放的是只有root能执行的命令
- /usr/bin存放的命令不能在单用户模式（修复模式）下运行
- usr（unix software resource）

目录名|目录作用
--|--
/bin|存放系统命令的目录，普通用户和root用户都能执行，单用户模式下也能执行
/sbin|保存和系统环境设置相关的命令，只有root可以使用，有些可以允许普通用户查看
/usr/bin|存放系统命令的目录，普通用户和root用户都能执行，和系统启动无关，单用户模式下不能执行
/usr/sbin|存放根文件系统不必要的管理命令，例如服务程序。只用root能使用
--|--
/boot|系统启动目录，保存系统启动相关文件，如内核文件和启动引导程序（grub）文件,单独分区，注意备份
/dev|硬件设备文件保存位置。
/etc|默认配置文件保存位置，需要备份。如账户密码，服务启动脚本，常用服务的配置文件，/etc/profile:shell的全局配置文件
/home|普通用户的家目录。是每一个用户的登录位置，但是root的家目录是单独的/root目录，家目录通常用~代表
/lib|系统调用的函数库保存位置
/lost+found|当系统意外崩溃或机器意外关机，而产生的一些文件碎片存放在这里。系统启动时fsck检查这里并修复损坏的文件系统。每个分区通常都有一个。
--|--
/media|挂载多媒体设备的目录，如：光盘。
/mnt|挂载额外设备，如U盘、移动硬盘、其他分区。
/misc|挂载NFS服务的共享目录
--|--
/opt|第三方安装的软件保存位置。但是习惯性把第三方软件安装在/usr/local目录当中
--|--
/proc|存在于内存里，虚拟文件系统。主要保存系统内核，进程，外部设备状态和网络状态灯。如：/proc/cpuinfo是保存CPU信息的，/proc/devices是保存设备驱动列表的，/proc/filesystems保存文件系统列表，/proc/net保存网络协议信息
/sys|虚拟文件系统。保存与内核相关信息
--|--
/root|root用户的家目录
/srv|服务数据目录
/tmp|临时文件目录，建议每次开机清空。
--|--
/usr|系统软件资源目录，usr不是user的缩写，而是Unix software resource的缩写。
/var|动态数据保存位置。主要保存缓存、日志以及软件运行所产生的的文件

2. 服务器注意事项
- 远程服务器不允许关机，只允许重启
- 重启时应该关闭服务
- 不要在服务器访问高峰执行高负载命令
- 远程配置防火墙时不要把自己踢出服务器（可以在配置防火墙时执行定时任务，5min重置一次防火墙，测试完了，就可以把定时任务关了）
- 指定合理的密码规范并定期更新
- 合理分配权限（越少越好）系统启动的服务越少越好
- 定期备份重要数据和日志
- linux的运维人员需要具备的首要品质：谨慎、习惯备份，不要把鸡蛋放在同一个篮子里
### 不要用使用个人机的心态和方法去管理服务器，要用管理服务器的理念去管理服务器
 
# 分区知识
分区的目的：把大硬盘分为小的逻辑分区
## 分区类型
- 一块硬盘
    - 主分区最多只能有4个
    - 扩展分区最多只能有1个
    - 主分区和扩展分区加起来不超过4个
    - 扩展分区不能写入数据，不能格式化只能用来包含逻辑分区
    - 逻辑分区可以写入数据和格式化
    - 一个扩展分区内可以有多个逻辑分区
## 格式化
*低级格式化是硬盘的硬件的操作*

高级格式化，又称逻辑格式化，它是根据用户指定的文件系统（Windows：FAT16、FAT32、NTFS；linux：EXT2、EXT3、EXT4）把文件系统写入硬盘内的操作。

格式化的主要目的是在硬盘中写入文件系统，最主要的工作就是按文件系统的规则，把硬盘分成等大小的数据块（block）。构建文件分区表，记录每个文件存在的数据块，也就是每个文件都有的i节点号（i node）。

## linux分区特有操作:硬件设备文件名
给每一个分区定义设备文件名

- windows磁盘分区过程：分区-->格式化-->分配盘符
- linux磁盘分区过程：分区-->格式化-->设置硬件设备文件名-->设置分区文件名-->挂载

/sda 1 ：第一个SATA硬盘，第一个分区

>逻辑分区不能占用1-4分区号，只能从5开始编号，所以/sda 5必定是逻辑分区

### 挂载
给每一个分区分配挂载点

- 必需分区
    - /（根分区）
    - swap分区（交换分区，虚拟内存，内存2倍，不超过2G）
- 推荐分区
    - /boot（启动分区，200M）

linux文件系统结构特点：目录和子目录不一定在一个分区内，子目录可以单独分区，如/home就可以单独分区

# 安装
1. 设置BIOS
2. 安装欢迎界面
    - Install or upgrade existing system
    - Install system with basic video drive 安装基本的显卡驱动
    - Rescue installed system
    - Boot from local drive
    - Memory test 存储介质检测
3. 密码原则
    - 复杂性原则
        - 八位字符以上、大小写字母、数字、符号
        - 不能是英文单词
        - 不能和用户信息相关
    - 易记忆性
        - 一句对自己有含义的话
        - flvx_3QI(飞流直下三千尺)
    - 时效性
        - 三个月--半年更换一次
4. 分区
    - boot会自动分到sda1
    - 根据服务器的用途,例如文件服务器就会给/home单独分区
5. 软件包选择
    - Desktop 桌面 个人用户
    - Minimal Desktop
    - Minimal 最小化 服务器，更安全，更稳定
    - Basic Server
    - Data base Server
    - Web Server
    - Virtual Host
    - software development workstation
6. 安装日志
    - /root/install.log 存储了安装在系统中的软件包及其版本信息
    - /root/install.log.syslog 存储了安装过程中留下的事件信息
    - /root/anaconda-ks.cfg 以Kickstart配置文件的格式记录安装过程中设置的选项信息，实现无人批量安装